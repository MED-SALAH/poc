# Docker Compose file Reference (https://docs.docker.com/compose/compose-file/)

version: '2'

# Define services
services:
  # App backend service
  app-server1:
    # Configuration for building the docker image for the backend service
    build:
      context: .
      args:
        APP_VERSION: "0.0.1-SNAPSHOT"
    ports:
      - "8080:8080" # Forward the exposed port 8080 on the container to port 8080 on the host machine
    environment:
      - SERVER_ID:S1
    restart: always


  app-server2:
    # Configuration for building the docker image for the backend service
    build:
      context: .
      args:
        APP_VERSION: "0.0.1-SNAPSHOT"
    ports:
      - "8081:8080" # Forward the exposed port 8080 on the container to port 8080 on the host machine
    environment:
      - SERVER_ID:S2
    restart: always


  app-server3:
    # Configuration for building the docker image for the backend service
    build:
      context: .
      args:
        APP_VERSION: "0.0.1-SNAPSHOT"
    ports:
      - "8082:8080" # Forward the exposed port 8080 on the container to port 8080 on the host machine
    environment:
      - SERVER_ID:S3
    restart: always